!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(function(){return(()=>{var t={807:t=>{var e={};t.exports=e;var r={};e.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,a=e.length,o=e.charAt(0),s=[0];for(i=0;i<t.length;++i){for(var u=0,h=t[i];u<s.length;++u)h+=s[u]<<8,s[u]=h%a,h=h/a|0;for(;h>0;)s.push(h%a),h=h/a|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=e[s[i]]}else n=function(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var o=0,s=t.at(r);o<a.length;++o)s+=a[o]<<8,a[o]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}(t,e);if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join("\r\n")}return n},e.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var n=r[e];if(!n){n=r[e]=[];for(var i=0;i<e.length;++i)n[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var a=e.length,o=e.charAt(0),s=[0];for(i=0;i<t.length;i++){var u=n[t.charCodeAt(i)];if(void 0===u)return;for(var h=0,f=u;h<s.length;++h)f+=s[h]*a,s[h]=255&f,f>>=8;for(;f>0;)s.push(255&f),f>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},832:t=>{t.exports={options:{usePureJavaScript:!1}}},991:(t,e,r)=>{var n=r(832);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},668:(t,e,r)=>{var n=r(832);r(991),r(116);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,a=0;a<r;++a)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(a,o){"utf8"===o&&(a=n.util.encodeUtf8(a));var s=a.length;i.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var h=i.fullMessageLength.length-1;h>=0;--h)i.fullMessageLength[h]+=s[1],s[1]=s[0]+(i.fullMessageLength[h]/4294967296>>>0),i.fullMessageLength[h]=i.fullMessageLength[h]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(a),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var s,h=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(a.substr(0,i.blockLength-h));for(var f=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)f+=(s=8*i.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(f>>>0),f=s>>>0;o.putInt32(f);var c={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(c,r,o);var l=n.util.createBuffer();return l.putInt32(c.h0),l.putInt32(c.h1),l.putInt32(c.h2),l.putInt32(c.h3),l.putInt32(c.h4),l.putInt32(c.h5),l.putInt32(c.h6),l.putInt32(c.h7),l},i};var a=null,o=!1,s=null;function u(t,e,r){for(var n,i,a,o,u,h,f,d,c,l,g,p,y,m=r.length();m>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=e[u-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(h=t.h0,f=t.h1,d=t.h2,c=t.h3,l=t.h4,g=t.h5,p=t.h6,y=t.h7,u=0;u<64;++u)a=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),o=h&f|d&(h^f),n=y+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(p^l&(g^p))+s[u]+e[u],y=p,p=g,g=l,l=c+n>>>0,c=d,d=f,f=h,h=n+(i=a+o)>>>0;t.h0=t.h0+h|0,t.h1=t.h1+f|0,t.h2=t.h2+d|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,t.h5=t.h5+g|0,t.h6=t.h6+p|0,t.h7=t.h7+y|0,m-=64}}},116:(t,e,r)=>{var n=r(832),i=r(807),a=t.exports=n.util=n.util||{};function o(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function s(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(a.isArrayBuffer(t)||a.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof s||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return a.nextTick=process.nextTick,void("function"==typeof setImmediate?a.setImmediate=setImmediate:a.setImmediate=a.nextTick);if("function"==typeof setImmediate)return a.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(a.nextTick=function(t){return setImmediate(t)});if(a.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];a.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,i=document.createElement("div");e=[],new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(i,{attributes:!0});var o=a.setImmediate;a.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),o(t)):(e.push(t),1===e.length&&i.setAttribute("a",n=!n))}}a.nextTick=a.setImmediate}(),a.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,a.globalScope=a.isNodejs?r.g:"undefined"==typeof self?window:self,a.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},a.isArrayBufferView=function(t){return t&&a.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},a.ByteBuffer=s,a.ByteStringBuffer=s,a.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},a.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},a.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},a.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(a.encodeUtf8(t))},a.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},a.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},a.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},a.ByteStringBuffer.prototype.putInt=function(t,e){o(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},a.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},a.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},a.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},a.ByteStringBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},a.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},a.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},a.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},a.ByteStringBuffer.prototype.copy=function(){var t=a.createBuffer(this.data);return t.read=this.read,t},a.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},a.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},a.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.ByteStringBuffer.prototype.toString=function(){return a.decodeUtf8(this.bytes())},a.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=a.isArrayBuffer(t),n=a.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},a.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},a.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},a.DataBuffer.prototype.putBytes=function(t,e){if(a.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(a.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof a.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&a.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof a.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=a.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=a.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},a.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},a.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},a.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},a.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},a.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},a.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},a.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},a.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},a.DataBuffer.prototype.putInt=function(t,e){o(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},a.DataBuffer.prototype.putSignedInt=function(t,e){return o(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},a.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},a.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},a.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},a.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},a.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},a.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},a.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},a.DataBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},a.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},a.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},a.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},a.DataBuffer.prototype.copy=function(){return new a.DataBuffer(this)},a.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},a.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},a.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},a.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return a.binary.raw.encode(e);if("hex"===t)return a.binary.hex.encode(e);if("base64"===t)return a.binary.base64.encode(e);if("utf8"===t)return a.text.utf8.decode(e);if("utf16"===t)return a.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},a.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=a.encodeUtf8(t)),new a.ByteBuffer(t)},a.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},a.xorBytes=function(t,e,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+a},a.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},a.bytesToHex=function(t){return a.createBuffer(t).toHex()},a.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";a.encode64=function(t,e){for(var r,n,i,a="",o="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),i=t.charCodeAt(s++),a+=u.charAt(r>>2),a+=u.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=u.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":u.charAt(63&i)),e&&a.length>e&&(o+=a.substr(0,e)+"\r\n",a=a.substr(e));return o+a},a.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,a="",o=0;o<t.length;)e=h[t.charCodeAt(o++)-43],r=h[t.charCodeAt(o++)-43],n=h[t.charCodeAt(o++)-43],i=h[t.charCodeAt(o++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(a+=String.fromCharCode((3&n)<<6|i)));return a},a.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},a.decodeUtf8=function(t){return decodeURIComponent(escape(t))},a.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},a.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},a.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n},a.binary.hex.encode=a.bytesToHex,a.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var i=0,a=r=r||0;for(1&t.length&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n},a.binary.base64.encode=function(t,e){for(var r,n,i,a="",o="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],i=t[s++],a+=u.charAt(r>>2),a+=u.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=u.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":u.charAt(63&i)),e&&a.length>e&&(o+=a.substr(0,e)+"\r\n",a=a.substr(e));return o+a},a.binary.base64.decode=function(t,e,r){var n,i,a,o,s=e;s||(s=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,f=r=r||0;u<t.length;)n=h[t.charCodeAt(u++)-43],i=h[t.charCodeAt(u++)-43],a=h[t.charCodeAt(u++)-43],o=h[t.charCodeAt(u++)-43],s[f++]=n<<2|i>>4,64!==a&&(s[f++]=(15&i)<<4|a>>2,64!==o&&(s[f++]=(3&a)<<6|o));return e?f-r:s.subarray(0,f)},a.binary.base58.encode=function(t,e){return a.binary.baseN.encode(t,f,e)},a.binary.base58.decode=function(t,e){return a.binary.baseN.decode(t,f,e)},a.text={utf8:{},utf16:{}},a.text.utf8.encode=function(t,e,r){t=a.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},a.text.utf8.decode=function(t){return a.decodeUtf8(String.fromCharCode.apply(null,t))},a.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var i=new Uint16Array(n.buffer),a=r=r||0,o=r,s=0;s<t.length;++s)i[o++]=t.charCodeAt(s),a+=2;return e?a-r:n},a.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},a.deflate=function(t,e,r){if(e=a.decode64(t.deflate(a.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},a.inflate=function(t,e,r){var n=t.inflate(a.encode64(e)).rval;return null===n?null:a.decode64(n)};var d=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=a.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},c=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(a.decode64(r))),r},l=function(t,e,r,n){var i=c(t,e);null===i&&(i={}),i[r]=n,d(t,e,i)},g=function(t,e,r){var n=c(t,e);return null!==n&&(n=r in n?n[r]:null),n},p=function(t,e,r){var n=c(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),d(t,e,n)}},y=function(t,e){d(t,e,null)},m=function(t,e,r){var n,i=null;void 0===r&&(r=["web","flash"]);var a=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),a="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),a=!0)}catch(t){o=t}if(a)break}if(!a)throw o;return i};a.setItem=function(t,e,r,n,i){m(l,arguments,i)},a.getItem=function(t,e,r,n){return m(g,arguments,n)},a.removeItem=function(t,e,r,n){m(p,arguments,n)},a.clearItems=function(t,e,r){m(y,arguments,r)},a.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},a.format=function(t){for(var e,r,n=/%./g,i=0,a=[],o=0;e=n.exec(t);){(r=t.substring(o,n.lastIndex-2)).length>0&&a.push(r),o=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(t.substring(o)),a.join("")},a.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",h=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",f=h.length>3?h.length%3:0;return u+(f?h.substr(0,f)+s:"")+h.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-h).toFixed(a).slice(2):"")},a.formatSize=function(t){return t>=1073741824?a.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?a.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?a.formatNumber(t/1024,0)+" KiB":a.formatNumber(t,0)+" bytes"},a.bytesFromIP=function(t){return-1!==t.indexOf(".")?a.bytesFromIPv4(t):-1!==t.indexOf(":")?a.bytesFromIPv6(t):null},a.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=a.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},a.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=a.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=a.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},a.bytesToIP=function(t){return 4===t.length?a.bytesToIPv4(t):16===t.length?a.bytesToIPv6(t):null},a.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},a.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=a.bytesToHex(t[i]+t[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(o)}if(r.length>0){var h=r[n];h.end-h.start>0&&(e.splice(h.start,h.end-h.start+1,""),0===h.start&&e.unshift(""),7===h.end&&e.push(""))}return e.join(":")},a.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in a&&!t.update)return e(null,a.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return a.cores=navigator.hardwareConcurrency,e(null,a.cores);if("undefined"==typeof Worker)return a.cores=1,e(null,a.cores);if("undefined"==typeof Blob)return a.cores=2,e(null,a.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,i,o){if(0===i){var s=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return a.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,a.cores)}!function(t,e){for(var n=[],i=[],a=0;a<t;++a){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var a=0;a<t;++a)n[a].terminate();e(0,i)}})),n.push(o)}for(a=0;a<t;++a)n[a].postMessage(a)}(o,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],a=r[n]=[],o=0;o<t;++o)if(n!==o){var s=e[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(o,r)),t(n,i-1,o)}))}([],5,16)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{changeUrlHandler:()=>nt,deleteSessionId:()=>et,getDeviceId:()=>Y,global:()=>Rt,handleUrlChange:()=>Ut,hiddenTabHandler:()=>it,listenTechEvent:()=>At,metaUpdater:()=>bt,preset:()=>Tt,profileUpdater:()=>pt,requestBeacon:()=>Dt,requestFetch:()=>st,requestXhr:()=>xt,sendEvent:()=>jt,sendSensitiveEvent:()=>_t,sendTechEvent:()=>Pt,setBufferSize:()=>I,setConfig:()=>E,setDeviceId:()=>Q,setDeviceIdUrl:()=>T,setHashAlgorithm:()=>L,setHashSalt:()=>U,setMeta:()=>vt,setProfile:()=>gt,setReportUrl:()=>C,setRequestAdapter:()=>s,setRestRequestAdapter:()=>h,setSessionId:()=>tt,setSessionLifetime:()=>D,setUTMUrlParams:()=>Lt,sha256:()=>Nt,warmUpSessionIdHandler:()=>ot});const t=t=>t<10?`0${t}`:t,e=()=>{const e=new Date,r=new Date(e.valueOf()-6e4*e.getTimezoneOffset()),[n]=r.toISOString().split("Z");return`${n}${i=r.getTimezoneOffset(),`${i<0?"+":"-"}${t(Math.abs(Math.floor(i/60)))}:${t(Math.abs(i%60))}`}`;var i},i=()=>Math.floor((new Date).getTime()/1e3);let a,o;const s=t=>{a=t},u=()=>a,h=t=>{o=t},f=()=>o,d="[Clickstream Agent]",c=["click","touch","keydown","scroll"],l=["_ga","_ym_uid","top100_id","tmr_lvid","___dmpkit___"],g=["staticId","idfa","gaid"],p="_sas",y="_sas_custom";let m,v=10,b="",w="",B=6e5;const I=t=>{var e;e=t,Number.isFinite(e)&&Number.isInteger(e)&&e>0&&(v=t)},S=()=>v,C=t=>{b=t},A=()=>b,T=t=>{},L=t=>{m=t},U=t=>{w=t},D=t=>{B=t},x=()=>B,E=({reportUrl:t,deviceIdUrl:e,bufferSize:r,requestAdapter:n,restRequestAdapter:i,hashAlgorithm:a,hashSalt:o,sessionLifetime:u})=>{t&&C(t),e&&T(e),r&&I(r),n&&s(n),i&&h(i),a&&L(a),o&&U(o),u&&D(u)},M=async(t,e=!1)=>{const r=e?f():u();if(!A())throw new Error(`${d} reportUrl is not defined`);if(!(globalThis.navigator?.onLine??1))throw new Error(`${d} Application is offline`);if(!r)throw new Error(`${d} Adapter is not defined`);await r({url:A(),body:t,method:"POST"})},N=(t,e)=>JSON.stringify(t)===JSON.stringify(e),k=[],O=(t=!1)=>{for(;k.length>Number(!t);){const t=k.shift();t&&M(t).catch((e=>{throw k.unshift(t),e}))}},j=t=>{const r=k[k.length-1];var n;!r||r.data.length>=S()||!(({meta:{timeStamp:t,...e},profile:r},{meta:{timeStamp:n,...i},profile:a})=>N(e,i)&&N(r,a))(r,t)?(n=t,k.push(n)):((t,r)=>{t?.data.push(r.data[0]),t.meta.timeStamp=e()})(r,t);const i=k[k.length-1];i&&i.data.length>=S()?O(!0):k.length>1&&O()},P=(t,e,r)=>{if("string"==typeof globalThis.document?.cookie){const n=[`${t}=${e||""}`,"samesite=strict","path=/"];if(/\.[^\d]/.test(globalThis.location.hostname)&&(n.push(`domain=.${(()=>{const t=globalThis.location.hostname.split(".");return t.length>=2?t.slice(-2).join("."):globalThis.location.hostname})()}`),n.push("secure")),r){const t=new Date;t.setTime(t.getTime()+r),n.push(`expires=${t.toUTCString()}`)}globalThis.document.cookie=n.join(";")}},_=t=>{if("string"==typeof globalThis.document?.cookie){const e=new RegExp(`(^|[^;]+)\\s*${t}\\s*=\\s*([^;]+)`).exec(globalThis.document.cookie);return e?e[2]:void 0}},R=[],$=t=>{R.forEach((e=>{e(t)}))},H={eventAction:"first_launch"},z={eventAction:"start_session"},q=t=>{H.deviceId=t,z.deviceId=t,H.timeStamp=e();const r=_(y)||_(p);r&&(H.sessionId=r,$(H))},W=t=>{H.sessionId=t,z.sessionId=t,z.timeStamp=e(),$(H),$(z)},V={getRandomValues:t=>{const e=new Uint8Array([...t]);for(let t=0;t<e.length;t+=1)e[t]=Math.floor(256*Math.random());return e}},F=globalThis.crypto??globalThis.msCrypto??V,J=t=>{const e=Number(t);return(e^Number(F.getRandomValues(new Uint8Array(1))[0])&15>>e/4).toString(16)},K="_sv",X="_sa",Z=2592e6;let G;const Q=async(t,e)=>{!_(K)&&(G=e({url:t,method:"GET",credentials:!0}).then((t=>{"string"!=typeof t?.id||_(K)||P(K,t.id,Z)})).finally((()=>{const t=_(K);t&&q(t)})))},Y=async()=>{try{await G}catch(t){}return _(K)||((()=>{if(!_(X)){const t=`SA1.${"10000000-1000-4000-8000-100000000000".replace(/[018]/g,J)}.${String(i())}`;P(X,t,Z),q(t)}})(),_(X))},tt=async t=>{const e=_(y);t&&e!==t&&(P(y,t,x()),W(t));const r=e||_(p);if(r)P(e?y:p,r,x());else{const t=`${await Y()??""}.${String(i())}`;P(p,t,x()),W(t)}},et=()=>{P(y,"",-1)},rt=()=>{"hidden"===document.visibilityState&&tt().then((()=>{O(!0)}))},nt=()=>{globalThis.addEventListener?.("beforeunload",rt)},it=()=>{globalThis.document?.addEventListener("visibilitychange",rt)},at=(t,e=0,r={})=>{const{maxWait:n,leading:i=!1,trailing:a=!0}=r;let o,s,u,h,f,d=0;const c=void 0!==n;function l(e){const r=o,n=s;return o=void 0,s=void 0,d=e,u=t.apply(n,r),u}function g(t){const r=t-f;return void 0===f||r>=e||r<0||c&&t-d>=n}function p(t){return h=void 0,a&&o?l(t):(o=void 0,s=void 0,u)}function y(){const t=Date.now();if(g(t))return p(t);h=setTimeout(y,function(t){const r=t-d,i=e-(t-f);return c?Math.min(i,n-r):i}(t))}function m(...t){const r=Date.now(),n=g(r);if(o=t,s=this,f=r,n){if(void 0===h)return function(t){return d=t,h=setTimeout(y,e),i?l(t):u}(f);if(c)return h=setTimeout(y,e),l(f)}return void 0===h&&(h=setTimeout(y,e)),u}return m.cancel=function(){void 0!==h&&clearTimeout(h),d=0,o=void 0,f=void 0,s=void 0,h=void 0},m.flush=function(){return void 0===h?u:p(Date.now())},m},ot=()=>{const t=((t,e=0,r={})=>{const{leading:n=!0,trailing:i=!0}=r;return at(t,e,{leading:n,maxWait:e,trailing:i})})((()=>{tt()}),5e3,{trailing:!1,leading:!0});c.forEach((e=>{globalThis.document?.addEventListener(e,t)}))},st=async({url:t,body:e,method:r="POST",credentials:n=!1})=>{const i={method:r,body:e?JSON.stringify(e):void 0,keepalive:!0,credentials:n?"include":"omit"};e&&(i.headers={"Content-Type":"application/json;charset=utf-8"});const a=await fetch(t,i);try{return await a.json()}catch(t){return}},ut={bluetooth:"BLUETOOTH",cellular:"CELLULAR",ethernet:"ETHERNET",wifi:"WIFI",mixed:"UNKNOWN",none:"UNKNOWN",wimax:"UNKNOWN",other:"UNKNOWN",unknown:"UNKNOWN"},ht=(t="",e=255)=>t.length>e?t.substring(0,e):t,ft=t=>{if(null==t)return;const e=t.filter((({value:t})=>"string"==typeof t)).slice(0,128);return e.length?e.map((({key:t,value:e})=>({key:ht(t),value:ht(e)}))):void 0},dt=({entity:t,key:e,value:r})=>{t.customIdentifiers||(t.customIdentifiers=[]);const n={key:e,value:r},i=t.customIdentifiers.find((t=>t.key===e));t.customIdentifiers=i?t.customIdentifiers.map((t=>t.key===e?n:t)):[...t.customIdentifiers,n]},ct=(t,e=!1)=>{const r=ht(t);return m&&e?m(r,w):r},lt={},gt=t=>{Object.assign(lt,{...t,clientBlock:ht(t.clientBlock,64),hashUserLoginId:ht(t.hashUserLoginId),appVersion:ht(t.appVersion,16),...t.adId&&{adId:ht(t.adId)},...t.appId&&{appId:ht(t.appId)},...t.subId&&{subId:ht(t.subId)},...t.sapId&&{sapId:ht(t.sapId)},...t.partnerId&&{partnerId:ht(t.partnerId)}})},pt={setEmail(t,e){return dt({entity:lt,key:"email",value:ct(t,e)}),this},setPhone(t,e){return dt({entity:lt,key:"phoneNumber",value:ct(t,e)}),this},setSbClID(t,e){return dt({entity:lt,key:"sberClientId",value:ct(t,e)}),this},setClientID(t,e){return lt.hashUserLoginId=ct(t,e),this},setProfileID(t,e,r){return dt({entity:lt,key:t,value:ct(e,r)}),this}},yt=async({sessionId:t,deviceId:e})=>{const r=(()=>{const t=[];return l.forEach((e=>{const r=_(e);r&&t.push({key:e,value:ht(r)})})),t.length>0?t:void 0})(),n=(()=>{const t=[];if(!globalThis.location)return null;const e=new URLSearchParams(globalThis.location.search);return 0===e.size?null:(e.forEach(((e,r)=>{if(e){const n=decodeURIComponent(e);t.push({key:r,value:ht(n)})}})),0===t.length?null:t.slice(0,32))})();return{...lt,applicationLanguage:ht(globalThis.document?.documentElement.lang,16),deviceId:e,sessionId:t,...r&&{cookie:r},...n&&{utm:n}}},mt={},vt=t=>{Object.assign(mt,t)},bt={setSbAppID(t,e){return dt({entity:mt,key:"sbApplicationId",value:ct(t,e)}),this},setMetaID(t,e,r){return dt({entity:mt,key:t,value:ct(e,!g.includes(t)&&r)}),this}},wt=()=>({...mt,platform:"WEB",screenSize:globalThis.screen?`${globalThis.screen.width}x${globalThis.screen.height}`:void 0,browser:globalThis.navigator?.userAgent,systemLanguage:globalThis.navigator?.language||globalThis.navigator?.userLanguage||globalThis.navigator?.browserLanguage||globalThis.navigator?.systemLanguage||"ru",timeStamp:e()}),Bt=async(t,r,n)=>{const i=n?.url??(()=>{if(!globalThis.document)return null;const{location:{origin:t,pathname:e}}=globalThis.document;return`${t}${e.length>1?e:""}`})(),a=globalThis.document?globalThis.document.title:null;let o;return"hidden"!==document.visibilityState&&(o=await(async()=>{try{const t=await(globalThis.navigator?.getBattery())||{},{level:e}=t;return"number"==typeof e?String(100*e):void 0}catch(t){return}})()),{eventCategory:ht(t.eventCategory),eventAction:ht(t.eventAction,1024),eventType:r,value:ht(t.value),properties:ft(t.properties),batteryLevel:o,connectionType:ut[globalThis.navigator?.connection?.type??"unknown"],timeStamp:n?.timeStamp||e(),...i&&{url:ht(i)},...a&&{pageName:ht(a)}}},It=async(t,e,r)=>{let n=r?.deviceId,i=r?.sessionId;return n||(n=await Y()),i||(await tt(),i=_(y)||_(p)),{profile:await yt({sessionId:i,deviceId:n}),meta:wt(),data:[await Bt(t,e,r)]}};function St(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}}const Ct=async t=>{if("timeStamp"in t){const e=await It({eventCategory:"cs",value:"",eventAction:t.eventAction},"technical",{timeStamp:t.timeStamp,sessionId:t.sessionId,deviceId:t.deviceId});j(e),delete t.timeStamp}},At=St((()=>{var t;t=Ct,R.push(t)})),Tt=St((()=>{s(st),h(st),At(),ot(),it(),nt(),Q("https://visor.sberbank.ru/get",st)})),Lt=t=>{},Ut=async t=>{const e=await It({eventCategory:"cs",value:"",eventAction:"screen_view"},"technical",{url:t});j(e)},Dt=({url:t,body:e})=>new Promise(((r,n)=>{const i=new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"});navigator.sendBeacon(t,i)?r():n()})),xt=({url:t,body:e,method:r="POST",credentials:n=!1})=>new Promise(((i,a)=>{const o=new XMLHttpRequest;o.open(r,t,!0),e&&o.setRequestHeader("Content-Type","application/json;charset=utf-8"),n&&(o.withCredentials=!0),o.send(e?JSON.stringify(e):e),o.onreadystatechange=()=>{if(4===o.readyState)if(o.status>=400)a();else try{i(JSON.parse(o.response))}catch(t){i(void 0)}}}));var Et=r(668),Mt=r.n(Et);const Nt=(t,e)=>{const r=`${t}${e??""}`,n=Mt().create();return n.update(r),n.digest().toHex()},kt=(t,e,r)=>{e&&t.push(r)},Ot=async(t,e,r=!1)=>{const n=await It(t,e);(()=>{const t=[];kt(t,!A(),"Не установлена конфигурация reportUrl. Используйте setConfig({ reportUrl }) для определения точки получения данных"),kt(t,!wt().apiKey,"Не установлен ключ meta apiKey. Используйте setMeta({ apiKey }) для отправки данных по вашему продукту"),kt(t,!u(),"Не установлен сетевой адаптер. Используйте setConfig({ requestAdapter }) или preset() для установки сетевого адаптера отправки данных"),kt(t,!f(),"Не установлен сетевой адаптер. Используйте setConfig({ restRequestAdapter }) или preset() для установки сетевого адаптера аварийной отправки данных"),t.length&&t.forEach((t=>{console.error(new Error(`${d} ${t}`))}))})(),r?await M(n):j(n)},jt=async t=>{await Ot(t,"business")},Pt=async t=>{await Ot(t,"technical")},_t=async t=>{await Ot(t,"sensitive",!0)},Rt=()=>{globalThis.clickstream||(globalThis.clickstream={setMeta:vt,metaUpdater:bt,setProfile:gt,profileUpdater:pt,setDeviceId:Q,getDeviceId:Y,setSessionId:tt,deleteSessionId:et,setReportUrl:C,setBufferSize:I,setDeviceIdUrl:T,setRequestAdapter:s,setRestRequestAdapter:h,setHashAlgorithm:L,setHashSalt:U,setSessionLifetime:D,setConfig:E,setUTMUrlParams:Lt,sendEvent:jt,sendSensitiveEvent:_t,sendTechEvent:Pt,listenTechEvent:At,changeUrlHandler:nt,hiddenTabHandler:it,warmUpSessionIdHandler:ot,handleUrlChange:Ut,preset:Tt,requestBeacon:Dt,requestXhr:xt,requestFetch:st,sha256:Nt})};Tt(),Rt()})(),n})()}));